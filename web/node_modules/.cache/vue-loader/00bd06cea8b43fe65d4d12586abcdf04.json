{"remainingRequest":"/Users/david/Code/convox/console3/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Code/convox/console3/web/src/views/Organization/Racks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Code/convox/console3/web/src/views/Organization/Racks.vue","mtime":1596545592985},{"path":"/Users/david/Code/convox/console3/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPcmdhbml6YXRpb24gZnJvbSAiQC9taXhpbnMvT3JnYW5pemF0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBhcG9sbG86IHsKICAgIGludGVncmF0aW9uczogewogICAgICBxdWVyeTogcmVxdWlyZSgiQC9xdWVyaWVzL0ludGVncmF0aW9ucy5ncmFwaHFsIiksCiAgICAgIHNraXAoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLm9yZ2FuaXphdGlvbi5pZDsKICAgICAgfSwKICAgICAgdXBkYXRlOiAoZGF0YSkgPT4gZGF0YS5vcmdhbml6YXRpb24/LmludGVncmF0aW9ucywKICAgICAgdmFyaWFibGVzKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBraW5kOiAicnVudGltZSIsCiAgICAgICAgICBvaWQ6IHRoaXMub3JnYW5pemF0aW9uLmlkLAogICAgICAgIH07CiAgICAgIH0sCiAgICB9LAogICAgcmFja3M6IHsKICAgICAgcXVlcnk6IHJlcXVpcmUoIkAvcXVlcmllcy9SYWNrcy5ncmFwaHFsIiksCiAgICAgIHNraXAoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLm9yZ2FuaXphdGlvbi5pZDsKICAgICAgfSwKICAgICAgdXBkYXRlOiAoZGF0YSkgPT4gZGF0YS5vcmdhbml6YXRpb24/LnJhY2tzLAogICAgICB2YXJpYWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG9pZDogdGhpcy5vcmdhbml6YXRpb24uaWQsCiAgICAgICAgfTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBQcm92aWRlcjogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvUHJvdmlkZXIiKSwKICAgIFJhY2s6ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnRzL1JhY2siKSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJlZFJhY2tzKCkgewogICAgICByZXR1cm4gdGhpcy5yYWNrcz8uZmlsdGVyKChyYWNrKSA9PiB7CiAgICAgICAgcmV0dXJuIHRoaXMucnVudGltZSA9PT0gbnVsbCA/IHRydWUgOiByYWNrLnJ1bnRpbWUgPT0gdGhpcy5ydW50aW1lLmlkOwogICAgICB9KTsKICAgIH0sCiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bnRpbWU6IG51bGwsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZXhwYW5kZWQocmlkKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMucmlkID09IHJpZCAmJiB0aGlzLiRyb3V0ZS5tZXRhLmV4cGFuZDsKICAgIH0sCiAgICBmaWx0ZXIoaWlkKSB7CiAgICAgIHRoaXMucnVudGltZSA9IGlpZDsKICAgIH0sCiAgICBzZXR0aW5ncyhyaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJvcmdhbml6YXRpb24vcmFjay9zZXR0aW5ncyIsCiAgICAgICAgcGFyYW1zOiB7IG9pZDogdGhpcy5vcmdhbml6YXRpb24uaWQsIHJpZDogcmlkIH0sCiAgICAgIH0pOwogICAgfSwKICAgIHRvZ2dsZShyaWQpIHsKICAgICAgaWYgKHRoaXMuZXhwYW5kZWQocmlkKSkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJvcmdhbml6YXRpb24vcmFja3MiLAogICAgICAgICAgcGFyYW1zOiB7IG9pZDogdGhpcy5vcmdhbml6YXRpb24uaWQgfSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAib3JnYW5pemF0aW9uL3JhY2svYXBwcyIsCiAgICAgICAgICBwYXJhbXM6IHsgb2lkOiB0aGlzLm9yZ2FuaXphdGlvbi5pZCwgcmlkOiByaWQgfSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAogIG1peGluczogW09yZ2FuaXphdGlvbl0sCn07Cg=="},{"version":3,"sources":["Racks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Racks.vue","sourceRoot":"src/views/Organization","sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12 d-flex mb-4\">\n      <div class=\"flex-grow-1\">\n        <span class=\"dropdown mr-2\">\n          <button class=\"btn btn-secondary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\">\n            <Provider v-if=\"runtime\" :kind=\"runtime.provider\" :text=\"runtime.title\" />\n            <span v-else>All Racks</span>\n          </button>\n          <div class=\"dropdown-menu\">\n            <a class=\"dropdown-item\" @click=\"filter(null)\" href=\"#\">All Racks</a>\n            <div v-if=\"integrations.length > 0\">\n              <div class=\"dropdown-divider\"></div>\n              <a v-for=\"integration in integrations\" :key=\"integration.id\" class=\"dropdown-item\" @click=\"filter(integration)\" href=\"#\">\n                <Provider :kind=\"integration.provider\" :text=\"integration.title\" />\n              </a>\n            </div>\n          </div>\n        </span>\n      </div>\n      <div class=\"flex-shrink-0\">\n        <div class=\"dropdown\">\n          <button class=\"btn btn-success dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">\n            <i class=\"fas fa-cloud-upload-alt mr-1\" aria-hidden=\"true\"></i>\n            Install\n          </button>\n          <div class=\"dropdown-menu dropdown-menu-right\">\n            <div v-if=\"integrations.length == 0\" class=\"dropdown-item\">No Runtime Integrations</div>\n            <div v-else>\n              <a v-for=\"integration in integrations\" :key=\"integration.id\" class=\"dropdown-item\" href=\"#\">\n                <Provider :kind=\"integration.provider\" :text=\"integration.title\" />\n              </a>\n            </div>\n          </div>\n          <a class=\"btn btn-success ml-2\" href=\"#\" data-toggle=\"modal\" data-target=\"#rack-add-manual\">\n            <i class=\"fas fa-plus-circle mr-1\"></i>\n            Import\n          </a>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"filteredRacks.length == 0\" class=\"col-12\">\n      <div class=\"card\">\n        <div class=\"card-body\">No Racks Found</div>\n      </div>\n    </div>\n    <Rack v-else v-for=\"rack in filteredRacks\" :key=\"rack.id\" :rack=\"rack\" />\n  </div>\n</template>\n\n<style lang=\"scss\" src=\"@/styles/rack.scss\"></style>\n\n<script>\nimport Organization from \"@/mixins/Organization\";\n\nexport default {\n  apollo: {\n    integrations: {\n      query: require(\"@/queries/Integrations.graphql\"),\n      skip() {\n        return !this.organization.id;\n      },\n      update: (data) => data.organization?.integrations,\n      variables() {\n        return {\n          kind: \"runtime\",\n          oid: this.organization.id,\n        };\n      },\n    },\n    racks: {\n      query: require(\"@/queries/Racks.graphql\"),\n      skip() {\n        return !this.organization.id;\n      },\n      update: (data) => data.organization?.racks,\n      variables() {\n        return {\n          oid: this.organization.id,\n        };\n      },\n    },\n  },\n  components: {\n    Provider: () => import(\"@/components/Provider\"),\n    Rack: () => import(\"@/components/Rack\"),\n  },\n  computed: {\n    filteredRacks() {\n      return this.racks?.filter((rack) => {\n        return this.runtime === null ? true : rack.runtime == this.runtime.id;\n      });\n    },\n  },\n  data: function() {\n    return {\n      runtime: null,\n    };\n  },\n  methods: {\n    expanded(rid) {\n      return this.$route.params.rid == rid && this.$route.meta.expand;\n    },\n    filter(iid) {\n      this.runtime = iid;\n    },\n    settings(rid) {\n      this.$router.push({\n        name: \"organization/rack/settings\",\n        params: { oid: this.organization.id, rid: rid },\n      });\n    },\n    toggle(rid) {\n      if (this.expanded(rid)) {\n        this.$router.push({\n          name: \"organization/racks\",\n          params: { oid: this.organization.id },\n        });\n      } else {\n        this.$router.push({\n          name: \"organization/rack/apps\",\n          params: { oid: this.organization.id, rid: rid },\n        });\n      }\n    },\n  },\n  mixins: [Organization],\n};\n</script>\n"]}]}