{"remainingRequest":"/Users/david/Code/convox/console3/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Code/convox/console3/web/src/views/Organization/Racks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Code/convox/console3/web/src/views/Organization/Racks.vue","mtime":1596496568945},{"path":"/Users/david/Code/convox/console3/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPcmdhbml6YXRpb24gZnJvbSAiQC9taXhpbnMvT3JnYW5pemF0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBhcG9sbG86IHsKICAgIGludGVncmF0aW9uczogewogICAgICBxdWVyeTogcmVxdWlyZSgiQC9xdWVyaWVzL0ludGVncmF0aW9ucy5ncmFwaHFsIiksCiAgICAgIHNraXAoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLm9yZ2FuaXphdGlvbi5pZDsKICAgICAgfSwKICAgICAgdXBkYXRlOiBkYXRhID0+CiAgICAgICAgZGF0YS5vcmdhbml6YXRpb24/LmludGVncmF0aW9ucy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBhLnByb3ZpZGVyLmxvY2FsZUNvbXBhcmUoYi5wcm92aWRlcikgfHwKICAgICAgICAgICAgYS50aXRsZS5sb2NhbGVDb21wYXJlKGIudGl0bGUpCiAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICB2YXJpYWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGtpbmQ6ICJydW50aW1lIiwKICAgICAgICAgIG9pZDogdGhpcy5vcmdhbml6YXRpb24uaWQKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgcmFja3M6IHsKICAgICAgcXVlcnk6IHJlcXVpcmUoIkAvcXVlcmllcy9SYWNrcy5ncmFwaHFsIiksCiAgICAgIHNraXAoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLm9yZ2FuaXphdGlvbi5pZDsKICAgICAgfSwKICAgICAgdXBkYXRlOiBkYXRhID0+IGRhdGEub3JnYW5pemF0aW9uPy5yYWNrcywKICAgICAgdmFyaWFibGVzKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBvaWQ6IHRoaXMub3JnYW5pemF0aW9uLmlkCiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgUHJvdmlkZXI6ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnRzL1Byb3ZpZGVyIiksCiAgICBSYWNrOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9SYWNrIikKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJlZFJhY2tzKCkgewogICAgICByZXR1cm4gdGhpcy5yYWNrcz8uZmlsdGVyKHJhY2sgPT4gewogICAgICAgIHJldHVybiB0aGlzLnJ1bnRpbWUgPT09IG51bGwgPyB0cnVlIDogcmFjay5ydW50aW1lID09IHRoaXMucnVudGltZS5pZDsKICAgICAgfSk7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bnRpbWU6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBleHBhbmRlZChyaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5yaWQgPT0gcmlkICYmIHRoaXMuJHJvdXRlLm1ldGEuZXhwYW5kOwogICAgfSwKICAgIGZpbHRlcihpaWQpIHsKICAgICAgdGhpcy5ydW50aW1lID0gaWlkOwogICAgfSwKICAgIHNldHRpbmdzKHJpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIm9yZ2FuaXphdGlvbi9yYWNrL3NldHRpbmdzIiwKICAgICAgICBwYXJhbXM6IHsgb2lkOiB0aGlzLm9yZ2FuaXphdGlvbi5pZCwgcmlkOiByaWQgfQogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGUocmlkKSB7CiAgICAgIGlmICh0aGlzLmV4cGFuZGVkKHJpZCkpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAib3JnYW5pemF0aW9uL3JhY2tzIiwKICAgICAgICAgIHBhcmFtczogeyBvaWQ6IHRoaXMub3JnYW5pemF0aW9uLmlkIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAib3JnYW5pemF0aW9uL3JhY2svYXBwcyIsCiAgICAgICAgICBwYXJhbXM6IHsgb2lkOiB0aGlzLm9yZ2FuaXphdGlvbi5pZCwgcmlkOiByaWQgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtaXhpbnM6IFtPcmdhbml6YXRpb25dCn07Cg=="},{"version":3,"sources":["Racks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Racks.vue","sourceRoot":"src/views/Organization","sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12 d-flex mb-4\">\n      <div class=\"flex-grow-1\">\n        <span class=\"dropdown mr-2\">\n          <button\n            class=\"btn btn-secondary dropdown-toggle\"\n            type=\"button\"\n            id=\"dropdownMenuButton\"\n            data-toggle=\"dropdown\"\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n          >\n            <Provider v-if=\"runtime\" :kind=\"runtime.provider\" :text=\"runtime.title\" />\n            <span v-else>All Racks</span>\n          </button>\n          <div class=\"dropdown-menu\">\n            <a class=\"dropdown-item\" @click=\"filter(null)\" href=\"#\">All Racks</a>\n\n            <div v-if=\"integrations.length > 0\">\n              <div class=\"dropdown-divider\"></div>\n              <a\n                v-for=\"integration in integrations\"\n                :key=\"integration.id\"\n                class=\"dropdown-item\"\n                @click=\"filter(integration)\"\n                href=\"#\"\n              >\n                <Provider :kind=\"integration.provider\" :text=\"integration.title\" />\n              </a>\n            </div>\n          </div>\n        </span>\n      </div>\n      <div class=\"flex-shrink-0\">\n        <div class=\"dropdown\">\n          <button class=\"btn btn-success dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">\n            <i class=\"fas fa-cloud-upload-alt mr-1\" aria-hidden=\"true\"></i>\n            Install\n          </button>\n          <div class=\"dropdown-menu dropdown-menu-right\">\n            <div v-if=\"integrations.length == 0\"></div>\n            <div v-else>\n              <a\n                v-for=\"integration in integrations\"\n                :key=\"integration.id\"\n                class=\"dropdown-item\"\n                href=\"#\"\n              >\n                <!-- data-toggle=\"modal.lazy\"\n                data-target=\"#runtime-1df0909d-f5bb-4eba-8df7-6e72655086b3\"-->\n                <Provider :kind=\"integration.provider\" :text=\"integration.title\" />\n              </a>\n            </div>\n          </div>\n\n          <a\n            class=\"btn btn-success ml-2\"\n            href=\"#\"\n            data-toggle=\"modal\"\n            data-target=\"#rack-add-manual\"\n          >\n            <i class=\"fas fa-plus-circle mr-1\"></i>\n            Import\n          </a>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"filteredRacks.length == 0\" class=\"col-12\">\n      <div class=\"card\">\n        <div class=\"card-body\">No Racks Found</div>\n      </div>\n    </div>\n    <Rack v-else v-for=\"rack in filteredRacks\" :key=\"rack.id\" :rack=\"rack\" />\n  </div>\n</template>\n\n<style lang=\"scss\" src=\"@/styles/rack.scss\"></style>\n\n<script>\nimport Organization from \"@/mixins/Organization\";\n\nexport default {\n  apollo: {\n    integrations: {\n      query: require(\"@/queries/Integrations.graphql\"),\n      skip() {\n        return !this.organization.id;\n      },\n      update: data =>\n        data.organization?.integrations.sort((a, b) => {\n          return (\n            a.provider.localeCompare(b.provider) ||\n            a.title.localeCompare(b.title)\n          );\n        }),\n      variables() {\n        return {\n          kind: \"runtime\",\n          oid: this.organization.id\n        };\n      }\n    },\n    racks: {\n      query: require(\"@/queries/Racks.graphql\"),\n      skip() {\n        return !this.organization.id;\n      },\n      update: data => data.organization?.racks,\n      variables() {\n        return {\n          oid: this.organization.id\n        };\n      }\n    }\n  },\n  components: {\n    Provider: () => import(\"@/components/Provider\"),\n    Rack: () => import(\"@/components/Rack\")\n  },\n  computed: {\n    filteredRacks() {\n      return this.racks?.filter(rack => {\n        return this.runtime === null ? true : rack.runtime == this.runtime.id;\n      });\n    }\n  },\n  data: function() {\n    return {\n      runtime: null\n    };\n  },\n  methods: {\n    expanded(rid) {\n      return this.$route.params.rid == rid && this.$route.meta.expand;\n    },\n    filter(iid) {\n      this.runtime = iid;\n    },\n    settings(rid) {\n      this.$router.push({\n        name: \"organization/rack/settings\",\n        params: { oid: this.organization.id, rid: rid }\n      });\n    },\n    toggle(rid) {\n      if (this.expanded(rid)) {\n        this.$router.push({\n          name: \"organization/racks\",\n          params: { oid: this.organization.id }\n        });\n      } else {\n        this.$router.push({\n          name: \"organization/rack/apps\",\n          params: { oid: this.organization.id, rid: rid }\n        });\n      }\n    }\n  },\n  mixins: [Organization]\n};\n</script>\n"]}]}