{"remainingRequest":"/Users/david/Code/convox/console3/web/node_modules/babel-loader/lib/index.js!/Users/david/Code/convox/console3/web/node_modules/eslint-loader/index.js??ref--13-0!/Users/david/Code/convox/console3/web/src/vue-apollo.js","dependencies":[{"path":"/Users/david/Code/convox/console3/web/src/vue-apollo.js","mtime":1596465043348},{"path":"/Users/david/Code/convox/console3/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/david/Code/convox/console3/web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvZGF2aWQvQ29kZS9jb252b3gvY29uc29sZTMvd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2RhdmlkL0NvZGUvY29udm94L2NvbnNvbGUzL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFZ1ZUFwb2xsbyBmcm9tICJ2dWUtYXBvbGxvIjsKaW1wb3J0IHsgY3JlYXRlQXBvbGxvQ2xpZW50LCByZXN0YXJ0V2Vic29ja2V0cyB9IGZyb20gInZ1ZS1jbGktcGx1Z2luLWFwb2xsby9ncmFwaHFsLWNsaWVudCI7IC8vIEluc3RhbGwgdGhlIHZ1ZSBwbHVnaW4KClZ1ZS51c2UoVnVlQXBvbGxvKTsgLy8gTmFtZSBvZiB0aGUgbG9jYWxTdG9yYWdlIGl0ZW0KCnZhciBBVVRIX1RPS0VOID0gInRva2VuIjsgLy8gSHR0cCBlbmRwb2ludAoKdmFyIGh0dHBFbmRwb2ludCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfR1JBUEhRTF9IVFRQIHx8ICJodHRwczovLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICIvZ3JhcGhxbCI7IC8vIEZpbGVzIFVSTCByb290CgpleHBvcnQgdmFyIGZpbGVzUm9vdCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfRklMRVNfUk9PVCB8fCBodHRwRW5kcG9pbnQuc3Vic3RyKDAsIGh0dHBFbmRwb2ludC5pbmRleE9mKCIvZ3JhcGhxbCIpKTsKVnVlLnByb3RvdHlwZS4kZmlsZXNSb290ID0gZmlsZXNSb290OyAvLyBDb25maWcKCnZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAvLyBZb3UgY2FuIHVzZSBgaHR0cHNgIGZvciBzZWN1cmUgY29ubmVjdGlvbiAocmVjb21tZW5kZWQgaW4gcHJvZHVjdGlvbikKICBodHRwRW5kcG9pbnQ6IGh0dHBFbmRwb2ludCwKICAvLyBZb3UgY2FuIHVzZSBgd3NzYCBmb3Igc2VjdXJlIGNvbm5lY3Rpb24gKHJlY29tbWVuZGVkIGluIHByb2R1Y3Rpb24pCiAgLy8gVXNlIGBudWxsYCB0byBkaXNhYmxlIHN1YnNjcmlwdGlvbnMKICB3c0VuZHBvaW50OiBwcm9jZXNzLmVudi5WVUVfQVBQX0dSQVBIUUxfV1MgfHwgIndzczovLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICIvZ3JhcGhxbCIsCiAgLy8gTG9jYWxTdG9yYWdlIHRva2VuCiAgdG9rZW5OYW1lOiBBVVRIX1RPS0VOLAogIC8vIEVuYWJsZSBBdXRvbWF0aWMgUXVlcnkgcGVyc2lzdGluZyB3aXRoIEFwb2xsbyBFbmdpbmUKICBwZXJzaXN0aW5nOiBmYWxzZSwKICAvLyBVc2Ugd2Vic29ja2V0cyBmb3IgZXZlcnl0aGluZyAobm8gSFRUUCkKICAvLyBZb3UgbmVlZCB0byBwYXNzIGEgYHdzRW5kcG9pbnRgIGZvciB0aGlzIHRvIHdvcmsKICB3ZWJzb2NrZXRzT25seTogZmFsc2UsCiAgLy8gSXMgYmVpbmcgcmVuZGVyZWQgb24gdGhlIHNlcnZlcj8KICBzc3I6IGZhbHNlIC8vIE92ZXJyaWRlIGRlZmF1bHQgYXBvbGxvIGxpbmsKICAvLyBub3RlOiBkb24ndCBvdmVycmlkZSBodHRwTGluayBoZXJlLCBzcGVjaWZ5IGh0dHBMaW5rIG9wdGlvbnMgaW4gdGhlCiAgLy8gaHR0cExpbmtPcHRpb25zIHByb3BlcnR5IG9mIGRlZmF1bHRPcHRpb25zLgogIC8vIGxpbms6IG15TGluawogIC8vIE92ZXJyaWRlIGRlZmF1bHQgY2FjaGUKICAvLyBjYWNoZTogbXlDYWNoZQogIC8vIE92ZXJyaWRlIHRoZSB3YXkgdGhlIEF1dGhvcml6YXRpb24gaGVhZGVyIGlzIHNldAogIC8vIGdldEF1dGg6ICh0b2tlbk5hbWUpID0+IC4uLgogIC8vIEFkZGl0aW9uYWwgQXBvbGxvQ2xpZW50IG9wdGlvbnMKICAvLyBhcG9sbG86IHsgLi4uIH0KICAvLyBDbGllbnQgbG9jYWwgZGF0YSAoc2VlIGFwb2xsby1saW5rLXN0YXRlKQogIC8vIGNsaWVudFN0YXRlOiB7IHJlc29sdmVyczogeyAuLi4gfSwgZGVmYXVsdHM6IHsgLi4uIH0gfQoKfTsgLy8gQ2FsbCB0aGlzIGluIHRoZSBWdWUgYXBwIGZpbGUKCmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm92aWRlcigpIHsKICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogIC8vIENyZWF0ZSBhcG9sbG8gY2xpZW50CiAgdmFyIF9jcmVhdGVBcG9sbG9DbGllbnQgPSBjcmVhdGVBcG9sbG9DbGllbnQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdE9wdGlvbnMsIHt9LCBvcHRpb25zKSksCiAgICAgIGFwb2xsb0NsaWVudCA9IF9jcmVhdGVBcG9sbG9DbGllbnQuYXBvbGxvQ2xpZW50LAogICAgICB3c0NsaWVudCA9IF9jcmVhdGVBcG9sbG9DbGllbnQud3NDbGllbnQ7CgogIGFwb2xsb0NsaWVudC53c0NsaWVudCA9IHdzQ2xpZW50OyAvLyBDcmVhdGUgdnVlIGFwb2xsbyBwcm92aWRlcgoKICB2YXIgYXBvbGxvUHJvdmlkZXIgPSBuZXcgVnVlQXBvbGxvKHsKICAgIGRlZmF1bHRDbGllbnQ6IGFwb2xsb0NsaWVudCwKICAgIGRlZmF1bHRPcHRpb25zOiB7CiAgICAgICRxdWVyeTogewogICAgICAgIGVycm9yUG9saWN5OiAiYWxsIiAvLyBmZXRjaFBvbGljeTogImNhY2hlLWFuZC1uZXR3b3JrIgoKICAgICAgfQogICAgfSwKICAgIGVycm9ySGFuZGxlcjogZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycm9yKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBlcnJvci5ncmFwaFFMRXJyb3JzLmZvckVhY2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRleHRlbnNpb25zOwoKICAgICAgICBpZiAoKChfZXJyb3IkZXh0ZW5zaW9ucyA9IGVycm9yLmV4dGVuc2lvbnMpID09PSBudWxsIHx8IF9lcnJvciRleHRlbnNpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkZXh0ZW5zaW9ucy5jb2RlKSA9PSAiVU5BVVRIRU5USUNBVEVEIikgewogICAgICAgICAgcmV0dXJuIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJsb2dpbiIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCgogICAgICBjb25zb2xlLmxvZygiJWNFcnJvciIsICJiYWNrZ3JvdW5kOiByZWQ7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMnB4IDRweDsgYm9yZGVyLXJhZGl1czogM3B4OyBmb250LXdlaWdodDogYm9sZDsiLCBlcnJvci5tZXNzYWdlKTsKICAgIH0KICB9KTsKICByZXR1cm4gYXBvbGxvUHJvdmlkZXI7Cn0gLy8gTWFudWFsbHkgY2FsbCB0aGlzIHdoZW4gdXNlciBsb2cgaW4KCmV4cG9ydCBmdW5jdGlvbiBvbkxvZ2luKF94LCBfeDIpIHsKICByZXR1cm4gX29uTG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyBNYW51YWxseSBjYWxsIHRoaXMgd2hlbiB1c2VyIGxvZyBvdXQKCmZ1bmN0aW9uIF9vbkxvZ2luKCkgewogIF9vbkxvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGFwb2xsb0NsaWVudCwgdG9rZW4pIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICJ1bmRlZmluZWQiICYmIHRva2VuKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQVVUSF9UT0tFTiwgdG9rZW4pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYXBvbGxvQ2xpZW50LndzQ2xpZW50KSByZXN0YXJ0V2Vic29ja2V0cyhhcG9sbG9DbGllbnQud3NDbGllbnQpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBhcG9sbG9DbGllbnQucmVzZXRTdG9yZSgpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjb25zb2xlLmxvZygiJWNFcnJvciBvbiBjYWNoZSByZXNldCAobG9naW4pIiwgImNvbG9yOiBvcmFuZ2U7IiwgX2NvbnRleHQudDAubWVzc2FnZSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDddXSk7CiAgfSkpOwogIHJldHVybiBfb25Mb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gb25Mb2dvdXQoX3gzKSB7CiAgcmV0dXJuIF9vbkxvZ291dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfb25Mb2dvdXQoKSB7CiAgX29uTG9nb3V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihhcG9sbG9DbGllbnQpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVE9LRU4pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYXBvbGxvQ2xpZW50LndzQ2xpZW50KSByZXN0YXJ0V2Vic29ja2V0cyhhcG9sbG9DbGllbnQud3NDbGllbnQpOwogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGFwb2xsb0NsaWVudC5yZXNldFN0b3JlKCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNzsKICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjb25zb2xlLmxvZygiJWNFcnJvciBvbiBjYWNoZSByZXNldCAobG9nb3V0KSIsICJjb2xvcjogb3JhbmdlOyIsIF9jb250ZXh0Mi50MC5tZXNzYWdlKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1syLCA3XV0pOwogIH0pKTsKICByZXR1cm4gX29uTG9nb3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["/Users/david/Code/convox/console3/web/src/vue-apollo.js"],"names":["Vue","VueApollo","createApolloClient","restartWebsockets","use","AUTH_TOKEN","httpEndpoint","process","env","VUE_APP_GRAPHQL_HTTP","window","location","host","filesRoot","VUE_APP_FILES_ROOT","substr","indexOf","prototype","$filesRoot","defaultOptions","wsEndpoint","VUE_APP_GRAPHQL_WS","tokenName","persisting","websocketsOnly","ssr","createProvider","options","apolloClient","wsClient","apolloProvider","defaultClient","$query","errorPolicy","errorHandler","error","graphQLErrors","forEach","extensions","code","$router","push","name","console","log","message","onLogin","token","localStorage","setItem","resetStore","onLogout","removeItem"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport VueApollo from \"vue-apollo\";\nimport { createApolloClient, restartWebsockets } from \"vue-cli-plugin-apollo/graphql-client\";\n\n// Install the vue plugin\nVue.use(VueApollo);\n\n// Name of the localStorage item\nconst AUTH_TOKEN = \"token\";\n\n// Http endpoint\nconst httpEndpoint = process.env.VUE_APP_GRAPHQL_HTTP || \"https://\" + window.location.host + \"/graphql\";\n\n// Files URL root\nexport const filesRoot = process.env.VUE_APP_FILES_ROOT || httpEndpoint.substr(0, httpEndpoint.indexOf(\"/graphql\"));\n\nVue.prototype.$filesRoot = filesRoot;\n\n// Config\nconst defaultOptions = {\n  // You can use `https` for secure connection (recommended in production)\n  httpEndpoint,\n  // You can use `wss` for secure connection (recommended in production)\n  // Use `null` to disable subscriptions\n  wsEndpoint: process.env.VUE_APP_GRAPHQL_WS || \"wss://\" + window.location.host + \"/graphql\",\n  // LocalStorage token\n  tokenName: AUTH_TOKEN,\n  // Enable Automatic Query persisting with Apollo Engine\n  persisting: false,\n  // Use websockets for everything (no HTTP)\n  // You need to pass a `wsEndpoint` for this to work\n  websocketsOnly: false,\n  // Is being rendered on the server?\n  ssr: false,\n\n  // Override default apollo link\n  // note: don't override httpLink here, specify httpLink options in the\n  // httpLinkOptions property of defaultOptions.\n  // link: myLink\n\n  // Override default cache\n  // cache: myCache\n\n  // Override the way the Authorization header is set\n  // getAuth: (tokenName) => ...\n\n  // Additional ApolloClient options\n  // apollo: { ... }\n\n  // Client local data (see apollo-link-state)\n  // clientState: { resolvers: { ... }, defaults: { ... } }\n};\n\n// Call this in the Vue app file\nexport function createProvider(options = {}) {\n  // Create apollo client\n  const { apolloClient, wsClient } = createApolloClient({\n    ...defaultOptions,\n    ...options,\n  });\n  apolloClient.wsClient = wsClient;\n\n  // Create vue apollo provider\n  const apolloProvider = new VueApollo({\n    defaultClient: apolloClient,\n    defaultOptions: {\n      $query: {\n        errorPolicy: \"all\",\n        // fetchPolicy: \"cache-and-network\"\n      },\n    },\n    errorHandler(error) {\n      error.graphQLErrors.forEach((error) => {\n        if (error.extensions?.code == \"UNAUTHENTICATED\") {\n          return this.$router.push({ name: \"login\" });\n        }\n      });\n      // eslint-disable-next-line no-console\n      console.log(\n        \"%cError\",\n        \"background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;\",\n        error.message\n      );\n    },\n  });\n\n  return apolloProvider;\n}\n\n// Manually call this when user log in\nexport async function onLogin(apolloClient, token) {\n  if (typeof localStorage !== \"undefined\" && token) {\n    localStorage.setItem(AUTH_TOKEN, token);\n  }\n  if (apolloClient.wsClient) restartWebsockets(apolloClient.wsClient);\n  try {\n    await apolloClient.resetStore();\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log(\"%cError on cache reset (login)\", \"color: orange;\", e.message);\n  }\n}\n\n// Manually call this when user log out\nexport async function onLogout(apolloClient) {\n  if (typeof localStorage !== \"undefined\") {\n    localStorage.removeItem(AUTH_TOKEN);\n  }\n  if (apolloClient.wsClient) restartWebsockets(apolloClient.wsClient);\n  try {\n    await apolloClient.resetStore();\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log(\"%cError on cache reset (logout)\", \"color: orange;\", e.message);\n  }\n}\n"]}]}